(function(i,l,c,R,a,e,s,u){"use strict";const y=function(o){const t=JSON.parse(JSON.stringify(o));for(const n in t.author)switch(n){case"email":case"phone":case"mfaEnabled":case"hasBouncedEmail":delete t.author[n]}return t},{ScrollView:B}=e.ReactNative;function h(o){let{message:t}=o;const n=e.React.useMemo(function(){return JSON.stringify(y(t),null,4)},[t.id]),r={marginBottom:8};return e.React.createElement(e.React.Fragment,null,e.React.createElement(B,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(s.Button,{style:r,text:"Copy Raw Content",color:"brand",size:"small",disabled:!t.content,onPress:function(){e.clipboard.setString(t.content),u.showToast("Copied content to clipboard",c.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(s.Button,{text:"Copy Raw Data",style:r,color:"brand",size:"small",onPress:function(){e.clipboard.setString(n),u.showToast("Copied data to clipboard",c.getAssetIDByName("toast_copy_link"))}}),t.content&&e.React.createElement(s.Codeblock,{selectable:!0,style:r},t.content),e.React.createElement(s.Codeblock,{selectable:!0},n)))}const d=a.findByProps("openLazy","hideActionSheet"),f=a.findByProps("push","pushLazy","pop"),b=a.findByProps("getRenderCloseButton")?.getRenderCloseButton??a.findByProps("getHeaderCloseButton")?.getHeaderCloseButton;a.findByName("Navigator")??a.findByProps("Navigator")?.Navigator;const{FormRow:w,FormIcon:v}=s.Forms,E=l.before("openLazy",d,function(o){let[t,n,r]=o;const g=r?.message;n!=="MessageLongPressActionSheet"||!g||t.then(function(P){const C=l.after("default",P,function(k,S){e.React.useEffect(function(){return function(){C()}},[]);const p=R.findInReactTree(S,function(_){return _?.[0]?.type?.name==="ButtonRow"});if(!p)return;const A=function(){return e.React.createElement(Nagivator,{initialRouteName:"RawPage",goBackOnBackPress:!0,screens:{RawPage:{title:"RawView",headerLeft:b?.(function(){return f.pop()}),render:function(){return e.React.createElement(h,{message:g})}}}})};p.push(e.React.createElement(w,{label:"View Raw",leading:e.React.createElement(v,{style:{opacity:1},source:c.getAssetIDByName("ic_chat_bubble_16px")}),onPress:function(){d.hideActionSheet(),f.push(A)}}))})})}),N=function(){return E()};return i.onUnload=N,i})({},vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts);
